---
phase: 06-foundation-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - llms.md
autonomous: true

must_haves:
  truths:
    - "AI assistants can look up any term in the glossary and get a single, canonical definition"
    - "AI assistants can trace any field type through the decision tree to identify which handler processes it"
    - "Decision tree visually shows handler priority order and explains WHY the order matters"
  artifacts:
    - path: "llms.md"
      provides: "Glossary section and handler decision tree"
      contains: "## Glossary"
    - path: "llms.md"
      provides: "ASCII decision tree"
      contains: "## Handler Chain Decision Tree"
  key_links:
    - from: "llms.md glossary"
      to: "llms.md body text"
      via: "consistent term usage"
      pattern: "Tuuid|translatable entity|TranslatableInterface"
---

<objective>
Add glossary and handler chain decision tree to llms.md

Purpose: Enable AI assistants to quickly understand bundle terminology and trace field-to-handler routing
Output: llms.md with new Glossary section (near top) and Handler Chain Decision Tree section (with ASCII visualization and priority explanation)
</objective>

<execution_context>
@C:\Users\info\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\info\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-foundation-documentation/06-CONTEXT.md
@.planning/phases/06-foundation-documentation/06-RESEARCH.md
@llms.md
@.claude/architecture.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Glossary Section</name>
  <files>llms.md</files>
  <action>
Add a "## Glossary" section near the top of llms.md (after Overview, before Core Concepts).

Include definitions for these terms (use these exact terms throughout the document):
- **Tuuid** (Translation UUID): UUIDv7 value object that groups all language variants of an entity. Stored as VARCHAR(36).
- **Translatable entity**: Any Doctrine entity implementing `TranslatableInterface` and using `TranslatableTrait`.
- **Handler**: A class implementing `TranslationHandlerInterface` that processes specific field types during translation.
- **Handler chain**: Priority-ordered sequence of handlers; first handler where `supports()` returns true processes the field.
- **Locale**: Language/region code (e.g., "en", "fr", "de") identifying a translation variant.
- **Source entity**: The original entity being translated from.
- **Target entity**: The new entity being created for the target locale.

After adding glossary, audit existing llms.md content:
- Replace "Translation UUID" or "translation ID" with "Tuuid"
- Replace "translatable model" with "translatable entity"
- Ensure handler references are lowercase "handler" not "Handler" in prose

The glossary is the lookup reference. Inline definitions (first use of term in a section) reinforce understanding.
  </action>
  <verify>
Grep for "## Glossary" in llms.md.
Grep for "Translation UUID" - should return 0 results (all replaced with Tuuid).
  </verify>
  <done>
Glossary section exists with 7+ term definitions. Terminology is consistent throughout document.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add Handler Chain Decision Tree</name>
  <files>llms.md</files>
  <action>
Add a "## Handler Chain Decision Tree" section after Glossary (or after Core Concepts if that flows better).

Create an ASCII art decision tree that shows field routing. Structure:
1. Start with "What kind of field?" branch
2. Show which handler catches each type
3. Include priority numbers with each handler

ASCII tree format (example structure to follow):

```
Field Processing Flow
=====================

                    [Field to translate]
                            |
                    Is it a primary key?
                      /            \
                    YES             NO
                     |               |
             PrimaryKeyHandler   Is it scalar/DateTime?
               (priority 100)      /            \
                    |           YES             NO
                  null     ScalarHandler    Is it embedded?
                          (priority 90)      /          \
                                          YES            NO
                                           |              |
                                   EmbeddedHandler   Is it a relation?
                                    (priority 80)    [continue branching...]
```

Extend the tree to cover:
- ManyToOne with inversedBy -> BidirectionalManyToOneHandler (70)
- OneToMany with mappedBy -> BidirectionalOneToManyHandler (60)
- OneToOne with mappedBy/inversedBy -> BidirectionalOneToOneHandler (50)
- ManyToMany bidirectional -> BidirectionalManyToManyHandler (40)
- ManyToMany unidirectional -> UnidirectionalManyToManyHandler (30)
- TranslatableInterface entity -> TranslatableEntityHandler (20)
- Any Doctrine object (fallback) -> DoctrineObjectHandler (10)

Keep tree under 80 characters wide. May need multiple sub-trees for clarity.

After the ASCII tree, add an "### Why Priority Order Matters" explanation section:
- Higher priority = checked first
- PrimaryKeyHandler at 100 ensures IDs never get translated
- ScalarHandler at 90 catches simple values before relationship handlers
- Relationship handlers (70-30) ordered by specificity (most specific first)
- TranslatableEntityHandler at 20 handles nested translatable entities
- DoctrineObjectHandler at 10 is the fallback for anything else

Claude's discretion: Whether to include a "no handler matches" fallback path (DoctrineObjectHandler catches most, but document the edge case if helpful).
  </action>
  <verify>
Grep for "## Handler Chain Decision Tree" in llms.md.
Grep for "priority 100" and "priority 10" to confirm tree has full range.
Visual inspection: tree renders correctly in markdown preview.
  </verify>
  <done>
ASCII decision tree shows complete field-to-handler routing. Priority explanation section explains the WHY. Tree is readable (under 80 char width).
  </done>
</task>

</tasks>

<verification>
- llms.md contains "## Glossary" section
- llms.md contains "## Handler Chain Decision Tree" section
- No instances of "Translation UUID" (replaced with Tuuid)
- ASCII tree includes all 10 handlers with priorities
- Priority explanation section exists
</verification>

<success_criteria>
1. Glossary defines 7+ key terms with canonical definitions
2. Handler decision tree visualizes complete field routing in ASCII
3. Priority explanation answers "why this order?"
4. Terminology is consistent throughout document
</success_criteria>

<output>
After completion, create `.planning/phases/06-foundation-documentation/06-01-SUMMARY.md`
</output>
