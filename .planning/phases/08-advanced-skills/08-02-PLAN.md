---
phase: 08-advanced-skills
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - .claude/skills/custom-handler-creator/SKILL.md
  - .claude/skills/custom-handler-creator/references/handler-template.md
  - .claude/skills/custom-handler-creator/references/test-template.md
  - .claude/skills/custom-handler-creator/references/handler-priority.md
  - .claude/skills/custom-handler-creator/references/examples.md
autonomous: true

must_haves:
  truths:
    - "AI asks about field type first before generating template"
    - "Priority selection is interactive with reasoning"
    - "Test generation offered separately after handler created"
    - "Generated handler includes all 4 TranslationHandlerInterface methods"
  artifacts:
    - path: ".claude/skills/custom-handler-creator/SKILL.md"
      provides: "Handler creation workflow"
      max_lines: 200
    - path: ".claude/skills/custom-handler-creator/references/handler-template.md"
      provides: "Handler class template"
      contains: "TranslationHandlerInterface"
    - path: ".claude/skills/custom-handler-creator/references/handler-priority.md"
      provides: "Priority decision matrix"
      contains: "Priority"
  key_links:
    - from: ".claude/skills/custom-handler-creator/SKILL.md"
      to: "references/handler-template.md"
      via: "workflow step"
      pattern: "handler-template"
    - from: ".claude/skills/custom-handler-creator/SKILL.md"
      to: "llms.md"
      via: "reference link"
      pattern: "llms\\.md.*Handler Chain"
---

<objective>
Create custom-handler-creator skill that guides users through extending the handler chain with use-case-first template generation and interactive priority selection.

Purpose: Enable AI assistants to help users create custom handlers for unsupported field types with correct priority and interface implementation.
Output: Claude Code skill with handler creation workflow and supporting templates.
</objective>

<execution_context>
@C:\Users\info\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\info\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-advanced-skills/08-CONTEXT.md
@.planning/phases/08-advanced-skills/08-RESEARCH.md
@.planning/phases/07-core-implementation-skill/07-01-SUMMARY.md
@.claude/skills/entity-translation-setup/SKILL.md
@llms.md (Handler Chain Decision Tree section, lines 33-157)
@src/Translation/Handlers/TranslationHandlerInterface.php
@src/Translation/Handlers/ScalarHandler.php
@src/Resources/config/services.yaml (handler registration pattern)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create custom-handler-creator skill</name>
  <files>
    .claude/skills/custom-handler-creator/SKILL.md
    .claude/skills/custom-handler-creator/references/handler-template.md
    .claude/skills/custom-handler-creator/references/test-template.md
    .claude/skills/custom-handler-creator/references/handler-priority.md
    .claude/skills/custom-handler-creator/references/examples.md
  </files>
  <action>
Create skill directory and files following Phase 7 pattern:

**SKILL.md** (under 200 lines):

1. Frontmatter with name: custom-handler-creator and specific trigger description:
   - Trigger phrases: "create custom handler", "handle encrypted fields", "handle computed properties", "handle value objects", "extend handler chain", "custom translation handler"
   - Avoid false positives on general "handler" questions

2. Activation section:
   - Announce: "I'll use the custom-handler-creator skill to guide you through creating a custom translation handler."

3. Workflow steps (high-level, templates in references/):
   - Step 1: Identify use case - Ask "What field type needs custom handling?"
   - Step 2: Show example use cases (link to examples.md)
   - Step 3: Determine handler behavior - "What should happen during translation?"
   - Step 4: Interactive priority selection (link to handler-priority.md)
   - Step 5: Generate handler (link to handler-template.md)
   - Step 6: Show service registration
   - Step 7: Offer tests separately - "Want me to add PHPUnit tests?"

4. Reference to llms.md Handler Chain Decision Tree for architecture understanding

**references/handler-template.md**:

Complete handler class template with:
- Namespace placeholder
- All 4 TranslationHandlerInterface methods
- Contextual TODO comments for each method
- DocBlock explaining handler purpose
- Inline comments explaining supports(), translate(), handleShared(), handleEmpty()

**references/test-template.md**:

PHPUnit test template with:
- 5 test methods following bundle convention:
  - it_supports_[field_type]
  - it_does_not_support_other_field_types
  - it_translates_[field_type]_correctly
  - it_shares_when_marked_shared
  - it_returns_null_when_empty
- Arrange/Act/Assert pattern
- TranslationArgs setup examples

**references/handler-priority.md**:

Priority decision matrix showing:
- Standard handler priorities (100-10)
- Priority ranges with explanations
- Custom handler insertion points (75, 65, 55, 45, 35, 25, 15)
- Conflicts to avoid
- Recommendation template: "Priority X because [reasoning]"

**references/examples.md**:

5-7 concrete use case examples:
- Encrypted fields (decrypt before clone, re-encrypt)
- Computed properties (recalculate in target locale)
- Value objects without Doctrine metadata
- Third-party library objects
- Cached/lazy-loaded fields (invalidate cache)
- File paths/URLs (transform for locale)
- Money value objects (currency handling)

Each example: What field type, Why custom handler needed, Suggested priority, Key implementation notes
  </action>
  <verify>
    - SKILL.md exists and is under 200 lines: `wc -l .claude/skills/custom-handler-creator/SKILL.md`
    - All 4 reference files exist in references/
    - Frontmatter has name and description fields
    - Workflow asks field type first (use-case-first)
    - Priority selection includes reasoning
    - Test offer is separate from handler generation
  </verify>
  <done>
    - custom-handler-creator skill complete with SKILL.md under 200 lines
    - Handler template includes all 4 interface methods
    - Test template follows bundle conventions
    - Priority matrix covers standard handlers and insertion points
    - Examples cover 5+ concrete use cases
  </done>
</task>

<task type="auto">
  <name>Task 2: Validate skill structure</name>
  <files>
    .claude/skills/custom-handler-creator/SKILL.md
    .claude/skills/custom-handler-creator/references/handler-template.md
    .claude/skills/custom-handler-creator/references/test-template.md
    .claude/skills/custom-handler-creator/references/handler-priority.md
    .claude/skills/custom-handler-creator/references/examples.md
  </files>
  <action>
Validate the created skill:

1. Line count check: SKILL.md must be under 200 lines
2. Frontmatter validation: name and description present
3. Use-case-first: Confirm workflow asks "What field type?" before generating
4. Interface coverage: handler-template.md includes supports(), translate(), handleShared(), handleEmpty()
5. Test coverage: test-template.md includes 5 test methods
6. Priority matrix: handler-priority.md includes standard priorities and insertion points
7. Examples count: examples.md includes 5+ use cases
8. Test offer separate: Confirm "Want me to add tests?" comes after handler generation
9. llms.md reference: Confirm link to Handler Chain section
  </action>
  <verify>
    - `wc -l .claude/skills/custom-handler-creator/SKILL.md` returns under 200
    - grep for all 4 interface methods in handler-template.md
    - grep for "Want me to add" in SKILL.md (test offer separate)
  </verify>
  <done>
    - Skill passes all validation checks
    - Ready for AI assistant use
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Skill directory exists: `.claude/skills/custom-handler-creator/`
2. SKILL.md under 200 lines with proper frontmatter
3. All 4 reference files present with complete content
4. Workflow matches user decisions: use-case-first, interactive priority, separate test offer
5. Specific trigger phrases avoid false positives
</verification>

<success_criteria>
- custom-handler-creator skill exists with SKILL.md under 200 lines
- Handler template includes all 4 TranslationHandlerInterface methods
- Priority decision matrix guides selection with reasoning
- Test generation offered separately after handler created
- References llms.md Handler Chain for architectural context
</success_criteria>

<output>
After completion, create `.planning/phases/08-advanced-skills/08-02-SUMMARY.md`
</output>
